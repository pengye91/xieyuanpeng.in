<!DOCTYPE HTML>
<html>
 <head>
  <meta charset="utf-8"/>
  <title>
   Made with Remarkable!
  </title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.1/styles/github.min.css" rel="stylesheet"/>
  <style type="text/css">
   h1,h2,h3,h4{color:#6495ed}body,table tr{background-color:#fff}table tr td,table tr th{border:1px solid #ccc;text-align:left;padding:6px 13px;margin:0}pre code,table,table tr{padding:0}body{font-family:Helvetica,Arial,sans-serif}h1,h2{text-align:center}blockquote{background:#f9f9f9;border-left:10px solid #6495ed;margin:1.5em 10px;padding:.5em 10px;font-style:italic}blockquote p{display:inline}hr{clear:both;float:none;width:100%;height:2.5px;margin:1.4em 0;border:none;background:#ddd;background:-webkit-gradient(linear,left bottom,right bottom,color-stop(0,#fff),color-stop(.1,#ddd),color-stop(.9,#ddd),color-stop(1,#fff)) #ddd;background:-moz-linear-gradient(left center,#fff 0,#ddd 10%,#ddd 90%,#fff 100%) #ddd}table tr{border-top:1px solid #ccc;margin:0}table tr:nth-child(2n){background-color:#aaa}table tr th{font-weight:700}table tr td :first-child,table tr th :first-child{margin-top:0}table tr td:last-child,table tr th :last-child{margin-bottom:0}code,tt{margin:0 2px;padding:0 5px;white-space:nowrap;border:1px solid #eaeaea;background-color:#f8f8f8;border-radius:3px}pre code{margin:0;white-space:pre;border:none;background:0 0}.highlight pre,pre{background-color:#f8f8f8;border:1px solid #ccc;font-size:13px;line-height:19px;overflow:auto;padding:6px 10px;border-radius:3px}
  </style>
 </head>
 <body>
  <h1 id="python-1">
   Python 函数式编程学习1
  </h1>
  <h3 id="_1">
   变量作用域规则
  </h3>
  <p>
   首先看下面的实例：
  </p>
  <pre><code class="python">In [1]: b = 6

In [2]: a = 3

In [3]: def f(a):
   ...:     print(a)
   ...:     print(b)
   ...:     b = 9
   ...:     

In [4]: f(a)
3
---------------------------------------------------------------------------
UnboundLocalError                         Traceback (most recent call last)
&lt;ipython-input-4-6a4ba51a6ef9&gt; in &lt;module&gt;()
----&gt; 1 f(a)

&lt;ipython-input-3-6b846ff17ed4&gt; in f(a)
      1 def f(a):
      2     print(a)
----&gt; 3     print(b)
      4     b = 9
      5 

UnboundLocalError: local variable 'b' referenced before assignment

</code></pre>
  <p>
   虽然定义了全局变量b, 但是
   <code>
    Python
   </code>
   在编译函数的定义体时，
   <strong>
    会判断b是局部变量
   </strong>
   ，这是因为在函数中对b赋值了。
  </p>
  <p>
   <code>
    Python
   </code>
   不要求声明变量，但是会假定在函数中定义被赋值的变量是局部变量。
  </p>
  <p>
   <strong>
    解决
   </strong>
  </p>
  <p>
   用
   <code>
    global
   </code>
   关键字将变量声明为全局变量可解：
  </p>
  <pre><code class="python">In [5]: b = 6

In [6]: a = 3

In [7]: def f(a):
   ...:     global b
   ...:     print(a)
   ...:     print(b)
   ...:     b = 9
   ...:     

In [8]: f(a)
3
6

In [9]: b
Out[9]: 9

</code></pre>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.1/highlight.min.js">
  </script>
  <script>
   hljs.initHighlightingOnLoad();
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript">
  </script>
  <script type="text/javascript">
   MathJax.Hub.Config({"showProcessingMessages" : false,"messageStyle" : "none","tex2jax": { inlineMath: [ [ "$", "$" ] ] }});
  </script>
 </body>
</html>